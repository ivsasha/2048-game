!function(){function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,r=Array(e);s<e;s++)r[s]=t[s];return r}function e(e,s){if(e){if("string"==typeof e)return t(e,s);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,s)}}function s(s){return function(e){if(Array.isArray(e))return t(e)}(s)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(s)||e(s)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r=new/*#__PURE__*/(function(){var t;function r(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,r),this.size=4,this.board=t||[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle"}return t=[{key:"moveLeft",value:function(){if("playing"===this.status){for(var t=!1,e=0;e<this.size;e++){for(var r=s(this.board[e]),i=[],a=0;a<this.size;a++)0!==this.board[e][a]&&i.push(this.board[e][a]);for(var n=[],o=0;o<i.length;o++)i[o]===i[o+1]?(n.push(2*i[o]),this.score+=2*i[o],o++):n.push(i[o]);for(;n.length<this.size;)n.push(0);JSON.stringify(r)!==JSON.stringify(n)&&(this.board[e]=n,t=!0)}t&&this.addRandomTile()}}},{key:"moveRight",value:function(){var t=this;if("playing"===this.status){for(var e=!1,r=0;r<this.size;r++)!function(r){for(var i=s(t.board[r]),a=s(i).reverse().filter(function(t){return 0!==t}),n=[],o=0;o<a.length;o++)a[o]===a[o+1]?(n.push(2*a[o]),t.score+=2*a[o],o++):n.push(a[o]);for(;n.length<t.size;)n.push(0);var l=n.reverse();JSON.stringify(i)!==JSON.stringify(l)&&(t.board[r]=l,e=!0)}(r);e&&this.addRandomTile()}}},{key:"moveUp",value:function(){var t=this;if("playing"===this.status){for(var e=!1,s=0;s<this.size;s++)!function(s){for(var r=[],i=0;i<t.size;i++)r.push(t.board[i][s]);for(var a=r.filter(function(t){return 0!==t}),n=[],o=0;o<a.length;o++)a[o]===a[o+1]?(n.push(2*a[o]),t.score+=2*a[o],o++):n.push(a[o]);for(;n.length<t.size;)n.push(0);for(var l=0;l<t.size;l++)t.board[l][s]!==n[l]&&(e=!0),t.board[l][s]=n[l]}(s);e&&this.addRandomTile()}}},{key:"moveDown",value:function(){var t=this;if("playing"===this.status){for(var e=!1,s=0;s<this.size;s++)!function(s){for(var r=[],i=t.size-1;i>=0;i--)r.push(t.board[i][s]);for(var a=r.filter(function(t){return 0!==t}),n=[],o=0;o<a.length;o++)a[o]===a[o+1]?(n.push(2*a[o]),t.score+=2*a[o],o++):n.push(a[o]);for(;n.length<t.size;)n.push(0);for(var l=t.size-1;l>=0;l--){var u=n[t.size-1-l];t.board[l][s]!==u&&(e=!0,t.board[l][s]=u)}}(s);e&&this.addRandomTile()}}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){return this.isGameWon()?this.status="win":this.isGameLost()?this.status="lose":this.isGameInProgress()?this.status="playing":this.status="idle",this.status}},{key:"start",value:function(){this.status="playing",this.addRandomTile(),this.addRandomTile()}},{key:"restart",value:function(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle",this.start()}},{key:"addRandomTile",value:function(){var t=this.getEmptyTiles();if(0!==t.length){var s,r=Math.floor(Math.random()*t.length),i=function(t){if(Array.isArray(t))return t}(s=t[r])||function(t,e){var s,r,i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a=[],n=!0,o=!1;try{for(i=i.call(t);!(n=(s=i.next()).done)&&(a.push(s.value),2!==a.length);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}return a}}(s,2)||e(s,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],n=i[1];this.board[a][n]=.9>Math.random()?2:4,this.score+=this.board[a][n],this.status="playing"}}},{key:"getEmptyTiles",value:function(){for(var t=[],e=0;e<this.size;e++)for(var s=0;s<this.size;s++)0===this.board[e][s]&&t.push([e,s]);return t}},{key:"isGameOver",value:function(){if(this.getEmptyTiles().length>0)return!1;for(var t=0;t<this.size;t++)for(var e=0;e<this.size;e++)if(e<this.size-1&&this.board[t][e]===this.board[t][e+1]||t<this.size-1&&this.board[t][e]===this.board[t+1][e])return!1;return!0}},{key:"isGameWon",value:function(){for(var t=0;t<this.size;t++)for(var e=0;e<this.size;e++)if(2048===this.board[t][e])return!0;return!1}},{key:"isGameLost",value:function(){return this.isGameOver()&&!this.isGameWon()}},{key:"isGameInProgress",value:function(){return"playing"===this.status}}],function(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(r.prototype,t),r}());document.addEventListener("keydown",function(t){if("playing"===r.getStatus()){switch(t.key){case"ArrowLeft":r.moveLeft();break;case"ArrowRight":r.moveRight();break;case"ArrowUp":r.moveUp();break;case"ArrowDown":r.moveDown()}a()}});var i=document.querySelector(".start");i.addEventListener("click",function(){"playing"===r.getStatus()&&(r.restart(),a(),i.classList.remove("start"),i.classList.add("restart"),i.textContent="Restart"),"win"===r.getStatus()&&(r.restart(),a(),i.classList.remove("start"),i.classList.add("restart"),i.textContent="Restart"),"lose"===r.getStatus()&&(r.restart(),a(),i.classList.remove("start"),i.classList.add("restart"),i.textContent="Restart"),"idle"===r.getStatus()&&(r.start(),a(),i.classList.remove("start"),i.classList.add("restart"),i.textContent="Restart")});var a=function(){var t=document.querySelectorAll(".field-cell");t.forEach(function(t){t.textContent="",t.classList.remove("field-cell--2"),t.classList.remove("field-cell--4"),t.classList.remove("field-cell--8"),t.classList.remove("field-cell--16"),t.classList.remove("field-cell--32"),t.classList.remove("field-cell--64"),t.classList.remove("field-cell--128"),t.classList.remove("field-cell--256"),t.classList.remove("field-cell--512"),t.classList.remove("field-cell--1024"),t.classList.remove("field-cell--2048")});for(var e=0;e<r.size;e++)for(var s=0;s<r.size;s++){var i=e*r.size+s,a=r.board[e][s];0!==a&&(t[i].textContent=a,t[i].classList.add("field-cell"),t[i].classList.add("field-cell--".concat(a)))}document.querySelector(".game-score").textContent="".concat(r.score);var n=document.querySelector(".message-win"),o=document.querySelector(".message-lose"),l=document.querySelector(".message-start");"win"===r.getStatus()&&(n.classList.remove("hidden"),o.classList.add("hidden"),l.classList.add("hidden")),"lose"===r.getStatus()&&(n.classList.add("hidden"),o.classList.remove("hidden"),l.classList.add("hidden")),"playing"===r.getStatus()&&(n.classList.add("hidden"),o.classList.add("hidden"),l.classList.add("hidden"))}}();
//# sourceMappingURL=index.3e12b78a.js.map
